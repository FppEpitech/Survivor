<div class="d-flex justify-content-between align-items-center m-4">
    <div>
        <h2 class="fw-bold">Dashboard</h2>
        <h6>Welcome!</h6>
    </div>

    <div>
        <button class="btn btn-light btn-outline-secondary m-4" type="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            <i class="bi bi-calendar-week"></i> {{ this.timeRangeValues[this.timeRangeIdx] }}
        </button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item" (click)="changeTimeRange(0)"> {{ this.timeRangeValues[0] }}</a></li>
            <li><a class="dropdown-item" (click)="changeTimeRange(1)"> {{ this.timeRangeValues[1] }}</a></li>
            <li><a class="dropdown-item" (click)="changeTimeRange(2)"> {{ this.timeRangeValues[2] }}</a></li>
        </ul>
        <button class="btn btn-primary">
            <i class="bi bi-journal-bookmark"></i> Reports
        </button>
    </div>
</div>

<div class="row g-4 text-center m-4">
    <div class="col-sm-6 col-md-7">
        <div class="card">
            <div class="d-flex justify-content-between align-items-center m-4">
                <div>
                    <h5 class="fw-bold">Customers Overview</h5>
                    <h6>When customers have joined in the time.</h6>
                </div>

                <div>
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <button type="button" class="btn btn-light btn-outline-secondary"
                            (click)="changeTimeRangeCustomer(0)">7 D</button>
                        <button type="button" class="btn btn-light btn-outline-secondary"
                            (click)="changeTimeRangeCustomer(1)">1 M</button>
                        <button type="button" class="btn btn-light btn-outline-secondary"
                            (click)="changeTimeRangeCustomer(2)">3 M</button>
                    </div>
                </div>
            </div>
            <div class="row g-4 text-center m-4">
                <div class="col-sm-6 col-md-2">
                    <h6 class="fw-bold">Customers</h6>
                    <h4>{{ this.customerStats?.totalCustomers }}</h4>
                </div>
                <div class="col-sm-6 col-md-2">
                    <h6 class="fw-bold">Doing meetings</h6>
                    <h4>{{ this.customerStats?.percentageWithEncounter }}%</h4>
                </div>
                <div class="col-sm-6 col-md-3">
                    <h6 class="fw-bold">Customers by coach</h6>
                    <h4>{{ this.customerStats?.averageCustomersPerCoach }}</h4>
                </div>
            </div>
            <div #containerRef1 class="is-flex is-justify-content-center">
                <ngx-charts-bar-horizontal
                *ngIf="this.customerStats !== undefined &&
                        this.customerStats.averageCustomersPerCoach !== null &&
                        this.customerStats.percentageWithEncounter !== null &&
                        this.customerStats.totalCustomers !== null"
                    [view]="[containerRef1.offsetWidth, 300]"
                    [scheme]="'aqua'" [results]="[
                    { name: 'customers', value: this.customerStats.totalCustomers || 0 },
                    { name: 'Doing meetings', value: this.customerStats.percentageWithEncounter || 0},
                    { name: 'Customers by coach', value: this.customerStats.averageCustomersPerCoach || 0}
                ]">
                </ngx-charts-bar-horizontal>
            </div>
        </div>
    </div>
    <div class="col-6 col-md-5">
        <div class="card">
            <div class="d-flex justify-content-between align-items-center m-4">
                <div>
                    <h5 class="fw-bold">Events</h5>
                    <h6>Our events and their status.</h6>
                </div>
            </div>
            <div class="row g-4 text-center m-4">
                <div class="col-sm-6 col-md-2">
                    <h6>Monthly</h6>
                    <h4>{{ this.eventStats?.totalEventsLastMonth }}</h4>
                </div>
                <div class="col-sm-6 col-md-2">
                    <h6>Weekly</h6>
                    <h4>{{ this.eventStats?.totalEventsLastWeek }}</h4>
                </div>
                <div class="col-sm-6 col-md-2">
                    <h6>Daily (Avg)</h6>
                    <h4>{{ this.eventStats?.averageEventsPerDay }}</h4>
                </div>
            </div>
            <div #containerRef2 class="is-flex is-justify-content-center">
                <ngx-charts-bar-vertical
                [view]="[containerRef2.offsetWidth, 300]"
                [scheme]="'aqua'"
                [results]="[]">
                </ngx-charts-bar-vertical>
            </div>
        </div>
    </div>
</div>


<div class="row g-4 text-center m-4">
    <div class="col-sm-6 col-md-7">
        <div class="card">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h5 class="fw-bold">Customers by Country</h5>
                </div>
                <div>
                    <button type="button" class="btn btn-light btn-outline-secondary">30 Days</button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-md-5">
        <div class="card">
            <div class="d-flex justify-content-between align-items-center m-4">
                <div>
                    <h5 class="fw-bold">Meeting top sources</h5>
                </div>

                <div>
                    <button type="button" class="btn btn-light btn-outline-secondary">30 Days</button>
                </div>
            </div>
            <div #containerRef3 class="is-flex is-justify-content-center m-4">
                <ngx-charts-advanced-pie-chart [view]="[containerRef3.offsetWidth, 300]" [scheme]="'aqua'"
                    [results]="[]">
                </ngx-charts-advanced-pie-chart>
            </div>
        </div>
    </div>
</div>




<!--
<div *ngIf="this._auth.isManager()" class="columns is-multiline">
    <div class="column is-3">
        <div #containerRef1 class="card is-flex is-justify-content-center">
            <ngx-charts-number-card
                *ngIf="this.paymentAccount[0] !== undefined"
                [view]="[containerRef1.offsetWidth, 300]"
                [cardColor]="'#fff4de'"
                [scheme]="'flame'"
                [results]="[
                    { name: this._tloco.translate('totalSalesText'), value: this.paymentAccount[0] }
                ]">
            </ngx-charts-number-card>
        </div>
    </div>
    <div class="column is-5">
        <div #containerRef2 class="card is-flex is-justify-content-center">
            <ngx-charts-bar-vertical
                *ngIf="this.nbCustomers[0] !== undefined"
                [view]="[containerRef2.offsetWidth, 300]"
                [scheme]="'flame'"
                [xAxis]="true"
                [yAxis]="true"
                [results]="[
                    { name: this._tloco.translate('customersTxt'), value: this.nbCustomers[0].length },
                    { name: this._tloco.translate('maleTxt'), value: this.genders[0]},
                    { name: this._tloco.translate('femaleTxt'), value: this.genders[1] },
                    { name: this._tloco.translate('otherTxt'), value: this.genders[2] },
                ]">
            </ngx-charts-bar-vertical>
        </div>
    </div>
    <div class="column is-3">
        <div #containerRef3 class="card is-flex is-justify-content-center">
            <ngx-charts-number-card
                *ngIf="this.nbEmployees[0] !== undefined && this.nbEncounters[0] !== undefined"
                [view]="[containerRef3.offsetWidth, 300]"
                [scheme]="'flame'"
                [cardColor]="'#fff4de'"
                [results]="[
                { name: this._tloco.translate('coachsTxt'), value: this.nbEmployees[0].length },
                { name: this._tloco.translate('meetingsTxt'), value: this.nbEncounters[0].length},
            ]">
            </ngx-charts-number-card>
        </div>
    </div>
</div>


<div *ngIf="!this._auth.isManager()" class="columns is-multiline">
    <div class="column is-3">
        <div #containerRef1 class="card is-flex is-justify-content-center">
            <ngx-charts-number-card
            *ngIf="this.nbCustomers[0] !== undefined && this.nbEncounters[0] !== undefined"
                [view]="[containerRef1.offsetWidth, 300]"
                [cardColor]="'#fff4de'"
                [scheme]="'flame'"
                [results]="[
                    { name: this._tloco.translate('customersTxt'), value: this.nbCustomers[0].length },
                    { name: this._tloco.translate('meetingsTxt'), value: this.nbEncounters[0] },
                ]">
            </ngx-charts-number-card>
        </div>
    </div>
    <div class="column is-8">
        <div #containerRef2 class="card is-flex is-justify-content-center">
            <ngx-charts-pie-grid
                [view]="[containerRef2.offsetWidth, 300]"
                [scheme]="'flame'"
                [results]="[
                { name: this._tloco.translate('maleTxt'), value: this.genders[0]},
                { name: this._tloco.translate('femaleTxt'), value: this.genders[1] },
                { name: this._tloco.translate('otherTxt'), value: this.genders[2] }
            ]">
            </ngx-charts-pie-grid>
        </div>
    </div>
</div>

<div class="column is-11">
    <p class="subtitle has-text-weight-bold mt-3">{{ "navCustomers" | transloco }}</p>
    <hr>
</div>

<div class="card cell-width mb-5">
    <table class="table is-fullwidth">
        <thead>
            <tr class="is-selected is-warning">
                <th>#</th>
                <th>{{ "nameTh" | transloco }}</th>
                <th>{{ "birthdateTh" | transloco }}</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let customer of this.customers; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ customer.name }} {{ customer.surname }}</td>
                <td>{{ customer.birth_date }}</td>
            </tr>
        </tbody>

    </table>
</div> -->
